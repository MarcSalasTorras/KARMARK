function cov_22wo5bx95e(){var path="C:\\Users\\Marc Salas\\bootcamp2\\skylab-bootcamp-202001\\staff\\marc-salas\\karmark\\karmark-api\\logic\\create-program.js";var hash="b649ca716bdc4f06a3a055ac17b79890de942308";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Marc Salas\\bootcamp2\\skylab-bootcamp-202001\\staff\\marc-salas\\karmark\\karmark-api\\logic\\create-program.js",statementMap:{"0":{start:{line:1,column:19},end:{line:1,column:43}},"1":{start:{line:2,column:34},end:{line:2,column:57}},"2":{start:{line:3,column:24},end:{line:3,column:49}},"3":{start:{line:11,column:0},end:{line:26,column:1}},"4":{start:{line:12,column:4},end:{line:12,column:33}},"5":{start:{line:13,column:4},end:{line:13,column:37}},"6":{start:{line:14,column:4},end:{line:14,column:38}},"7":{start:{line:16,column:4},end:{line:25,column:6}},"8":{start:{line:18,column:8},end:{line:18,column:78}},"9":{start:{line:18,column:19},end:{line:18,column:78}},"10":{start:{line:20,column:24},end:{line:20,column:76}},"11":{start:{line:22,column:8},end:{line:22,column:35}},"12":{start:{line:24,column:8},end:{line:24,column:57}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:43},end:{line:26,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:11},end:{line:17,column:12}},loc:{start:{line:17,column:19},end:{line:25,column:5}},line:17}},branchMap:{"0":{loc:{start:{line:18,column:8},end:{line:18,column:78}},type:"if",locations:[{start:{line:18,column:8},end:{line:18,column:78}},{start:{line:18,column:8},end:{line:18,column:78}}],line:18}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b649ca716bdc4f06a3a055ac17b79890de942308"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_22wo5bx95e=function(){return actualCoverage;};return actualCoverage;}cov_22wo5bx95e();const{validate}=(cov_22wo5bx95e().s[0]++,require('karmark-utils'));const{models:{Program,User}}=(cov_22wo5bx95e().s[1]++,require('karmark-data'));const{NotFoundError}=(cov_22wo5bx95e().s[2]++,require('karmark-errors'));/** Creates a new program on the DB with the given data
 *
 * @param {string} name name of the program you want to save
 * @param {string} author id of the author of the program
 * @param {array} code array of istructions of the program
 */cov_22wo5bx95e().s[3]++;module.exports=({name,author,code})=>{cov_22wo5bx95e().f[0]++;cov_22wo5bx95e().s[4]++;validate.string(name,'name');cov_22wo5bx95e().s[5]++;validate.string(author,'author');cov_22wo5bx95e().s[6]++;validate.type(code,'code',Array);cov_22wo5bx95e().s[7]++;return User.findById(author).then(user=>{cov_22wo5bx95e().f[1]++;cov_22wo5bx95e().s[8]++;if(!user){cov_22wo5bx95e().b[0][0]++;cov_22wo5bx95e().s[9]++;throw new NotFoundError(`user with id ${author} not found`);}else{cov_22wo5bx95e().b[0][1]++;}const program=(cov_22wo5bx95e().s[10]++,new Program({name,created:new Date(),author,code}));cov_22wo5bx95e().s[11]++;user.programs.push(program);cov_22wo5bx95e().s[12]++;return Promise.all([user.save(),program.save()]);});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZS1wcm9ncmFtLmpzIl0sIm5hbWVzIjpbInZhbGlkYXRlIiwicmVxdWlyZSIsIm1vZGVscyIsIlByb2dyYW0iLCJVc2VyIiwiTm90Rm91bmRFcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiLCJuYW1lIiwiYXV0aG9yIiwiY29kZSIsInN0cmluZyIsInR5cGUiLCJBcnJheSIsImZpbmRCeUlkIiwidGhlbiIsInVzZXIiLCJwcm9ncmFtIiwiY3JlYXRlZCIsIkRhdGUiLCJwcm9ncmFtcyIsInB1c2giLCJQcm9taXNlIiwiYWxsIiwic2F2ZSJdLCJtYXBwaW5ncyI6ImtsRUFBQSxLQUFNLENBQUNBLFFBQUQsMkJBQWFDLE9BQU8sQ0FBQyxlQUFELENBQXBCLENBQU4sQ0FDQSxLQUFNLENBQUNDLE1BQU0sQ0FBRSxDQUFDQyxPQUFELENBQVVDLElBQVYsQ0FBVCwyQkFBNEJILE9BQU8sQ0FBQyxjQUFELENBQW5DLENBQU4sQ0FDQSxLQUFNLENBQUNJLGFBQUQsMkJBQWtCSixPQUFPLENBQUMsZ0JBQUQsQ0FBekIsQ0FBTixDQUVBOzs7OzsyQkFNQUssTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQUMsQ0FBQ0MsSUFBRCxDQUFPQyxNQUFQLENBQWVDLElBQWYsQ0FBRCxHQUEwQixpREFDdkNWLFFBQVEsQ0FBQ1csTUFBVCxDQUFnQkgsSUFBaEIsQ0FBc0IsTUFBdEIsRUFEdUMsd0JBRXZDUixRQUFRLENBQUNXLE1BQVQsQ0FBZ0JGLE1BQWhCLENBQXdCLFFBQXhCLEVBRnVDLHdCQUd2Q1QsUUFBUSxDQUFDWSxJQUFULENBQWNGLElBQWQsQ0FBb0IsTUFBcEIsQ0FBNEJHLEtBQTVCLEVBSHVDLHdCQUt2QyxNQUFPVCxDQUFBQSxJQUFJLENBQUNVLFFBQUwsQ0FBY0wsTUFBZCxFQUNOTSxJQURNLENBQ0FDLElBQUksRUFBSSxpREFDWCxHQUFJLENBQUNBLElBQUwsQ0FBVyx5REFBTSxJQUFJWCxDQUFBQSxhQUFKLENBQW1CLGdCQUFlSSxNQUFPLFlBQXpDLENBQU4sQ0FBMkQsQ0FBdEUsaUNBRUEsS0FBTVEsQ0FBQUEsT0FBTywyQkFBRyxHQUFJZCxDQUFBQSxPQUFKLENBQVksQ0FBQ0ssSUFBRCxDQUFPVSxPQUFPLENBQUUsR0FBSUMsQ0FBQUEsSUFBSixFQUFoQixDQUEwQlYsTUFBMUIsQ0FBa0NDLElBQWxDLENBQVosQ0FBSCxDQUFiLENBSFcseUJBS1hNLElBQUksQ0FBQ0ksUUFBTCxDQUFjQyxJQUFkLENBQW1CSixPQUFuQixFQUxXLHlCQU9YLE1BQU9LLENBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLENBQUNQLElBQUksQ0FBQ1EsSUFBTCxFQUFELENBQWNQLE9BQU8sQ0FBQ08sSUFBUixFQUFkLENBQVosQ0FBUCxDQUNILENBVE0sQ0FBUCxDQVVILENBZkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7dmFsaWRhdGV9ID0gcmVxdWlyZSgna2FybWFyay11dGlscycpXHJcbmNvbnN0IHttb2RlbHM6IHtQcm9ncmFtLCBVc2VyfX0gPSByZXF1aXJlKCdrYXJtYXJrLWRhdGEnKVxyXG5jb25zdCB7Tm90Rm91bmRFcnJvcn0gPSByZXF1aXJlKCdrYXJtYXJrLWVycm9ycycpXHJcblxyXG4vKiogQ3JlYXRlcyBhIG5ldyBwcm9ncmFtIG9uIHRoZSBEQiB3aXRoIHRoZSBnaXZlbiBkYXRhXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIHByb2dyYW0geW91IHdhbnQgdG8gc2F2ZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gYXV0aG9yIGlkIG9mIHRoZSBhdXRob3Igb2YgdGhlIHByb2dyYW1cclxuICogQHBhcmFtIHthcnJheX0gY29kZSBhcnJheSBvZiBpc3RydWN0aW9ucyBvZiB0aGUgcHJvZ3JhbVxyXG4gKi9cclxubW9kdWxlLmV4cG9ydHMgPSAoe25hbWUsIGF1dGhvciwgY29kZX0pID0+IHtcclxuICAgIHZhbGlkYXRlLnN0cmluZyhuYW1lLCAnbmFtZScpXHJcbiAgICB2YWxpZGF0ZS5zdHJpbmcoYXV0aG9yLCAnYXV0aG9yJylcclxuICAgIHZhbGlkYXRlLnR5cGUoY29kZSwgJ2NvZGUnLCBBcnJheSlcclxuXHJcbiAgICByZXR1cm4gVXNlci5maW5kQnlJZChhdXRob3IpXHJcbiAgICAudGhlbiAodXNlciA9PiB7XHJcbiAgICAgICAgaWYgKCF1c2VyKSB0aHJvdyBuZXcgTm90Rm91bmRFcnJvcihgdXNlciB3aXRoIGlkICR7YXV0aG9yfSBub3QgZm91bmRgKVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSBuZXcgUHJvZ3JhbSh7bmFtZSwgY3JlYXRlZDogbmV3IERhdGUsIGF1dGhvciwgY29kZX0pXHJcblxyXG4gICAgICAgIHVzZXIucHJvZ3JhbXMucHVzaChwcm9ncmFtKSAgXHJcblxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbdXNlci5zYXZlKCksIHByb2dyYW0uc2F2ZSgpXSlcclxuICAgIH0pXHJcbn0iXX0=