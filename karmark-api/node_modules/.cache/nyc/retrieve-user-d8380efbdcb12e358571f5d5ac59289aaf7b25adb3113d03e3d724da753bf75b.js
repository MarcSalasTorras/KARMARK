function cov_fwmw9cuw0(){var path="C:\\Users\\Marc Salas\\bootcamp2\\skylab-bootcamp-202001\\staff\\marc-salas\\karmark\\karmark-api\\logic\\retrieve-user.js";var hash="c3e959245d5d8619b9767e034a7d1833d010c2e1";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Marc Salas\\bootcamp2\\skylab-bootcamp-202001\\staff\\marc-salas\\karmark\\karmark-api\\logic\\retrieve-user.js",statementMap:{"0":{start:{line:1,column:19},end:{line:1,column:43}},"1":{start:{line:2,column:25},end:{line:2,column:48}},"2":{start:{line:3,column:24},end:{line:3,column:49}},"3":{start:{line:9,column:0},end:{line:34,column:1}},"4":{start:{line:10,column:4},end:{line:10,column:29}},"5":{start:{line:12,column:4},end:{line:33,column:10}},"6":{start:{line:15,column:12},end:{line:15,column:79}},"7":{start:{line:15,column:23},end:{line:15,column:79}},"8":{start:{line:17,column:12},end:{line:17,column:41}},"9":{start:{line:19,column:12},end:{line:19,column:27}},"10":{start:{line:21,column:12},end:{line:23,column:14}},"11":{start:{line:22,column:16},end:{line:22,column:44}},"12":{start:{line:25,column:12},end:{line:25,column:37}},"13":{start:{line:27,column:13},end:{line:27,column:24}},"14":{start:{line:32,column:12},end:{line:32,column:54}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:17},end:{line:9,column:18}},loc:{start:{line:9,column:24},end:{line:34,column:1}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:14},end:{line:14,column:15}},loc:{start:{line:14,column:21},end:{line:29,column:9}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:21,column:34},end:{line:21,column:35}},loc:{start:{line:21,column:45},end:{line:23,column:13}},line:21},"3":{name:"(anonymous_3)",decl:{start:{line:30,column:14},end:{line:30,column:15}},loc:{start:{line:30,column:55},end:{line:33,column:9}},line:30}},branchMap:{"0":{loc:{start:{line:15,column:12},end:{line:15,column:79}},type:"if",locations:[{start:{line:15,column:12},end:{line:15,column:79}},{start:{line:15,column:12},end:{line:15,column:79}}],line:15}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c3e959245d5d8619b9767e034a7d1833d010c2e1"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_fwmw9cuw0=function(){return actualCoverage;};return actualCoverage;}cov_fwmw9cuw0();const{validate}=(cov_fwmw9cuw0().s[0]++,require('karmark-utils'));const{models:{User}}=(cov_fwmw9cuw0().s[1]++,require('karmark-data'));const{NotFoundError}=(cov_fwmw9cuw0().s[2]++,require('karmark-errors'));/** Retrieve all the user data
 *
 * @param {string} id id of the user
 */cov_fwmw9cuw0().s[3]++;module.exports=id=>{cov_fwmw9cuw0().f[0]++;cov_fwmw9cuw0().s[4]++;validate.string(id,'id');cov_fwmw9cuw0().s[5]++;return User.findById(id).lean().then(user=>{cov_fwmw9cuw0().f[1]++;cov_fwmw9cuw0().s[6]++;if(!user){cov_fwmw9cuw0().b[0][0]++;cov_fwmw9cuw0().s[7]++;throw new NotFoundError(`user with id ${id} not found`);}else{cov_fwmw9cuw0().b[0][1]++;}cov_fwmw9cuw0().s[8]++;user.id=user._id.toString();cov_fwmw9cuw0().s[9]++;delete user._id;cov_fwmw9cuw0().s[10]++;user.programs.forEach(program=>{cov_fwmw9cuw0().f[2]++;cov_fwmw9cuw0().s[11]++;program=program.toString();});cov_fwmw9cuw0().s[12]++;user.retrieved=new Date();cov_fwmw9cuw0().s[13]++;return user;}).then(({name,surname,username,programs})=>{cov_fwmw9cuw0().f[3]++;cov_fwmw9cuw0().s[14]++;return{name,surname,username,programs};});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXVzZXIuanMiXSwibmFtZXMiOlsidmFsaWRhdGUiLCJyZXF1aXJlIiwibW9kZWxzIiwiVXNlciIsIk5vdEZvdW5kRXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIiwiaWQiLCJzdHJpbmciLCJmaW5kQnlJZCIsImxlYW4iLCJ0aGVuIiwidXNlciIsIl9pZCIsInRvU3RyaW5nIiwicHJvZ3JhbXMiLCJmb3JFYWNoIiwicHJvZ3JhbSIsInJldHJpZXZlZCIsIkRhdGUiLCJuYW1lIiwic3VybmFtZSIsInVzZXJuYW1lIl0sIm1hcHBpbmdzIjoib2dGQUFBLEtBQU0sQ0FBQ0EsUUFBRCwwQkFBYUMsT0FBTyxDQUFDLGVBQUQsQ0FBcEIsQ0FBTixDQUNBLEtBQU0sQ0FBQ0MsTUFBTSxDQUFFLENBQUNDLElBQUQsQ0FBVCwwQkFBbUJGLE9BQU8sQ0FBQyxjQUFELENBQTFCLENBQU4sQ0FDQSxLQUFNLENBQUNHLGFBQUQsMEJBQWtCSCxPQUFPLENBQUMsZ0JBQUQsQ0FBekIsQ0FBTixDQUVBOzs7MEJBSUFJLE1BQU0sQ0FBQ0MsT0FBUCxDQUFrQkMsRUFBRCxFQUFPLCtDQUNwQlAsUUFBUSxDQUFDUSxNQUFULENBQWdCRCxFQUFoQixDQUFvQixJQUFwQixFQURvQix1QkFHcEIsTUFBT0osQ0FBQUEsSUFBSSxDQUFDTSxRQUFMLENBQWNGLEVBQWQsRUFDRkcsSUFERSxHQUVGQyxJQUZFLENBRUdDLElBQUksRUFBRywrQ0FDVCxHQUFJLENBQUNBLElBQUwsQ0FBVyx1REFBTSxJQUFJUixDQUFBQSxhQUFKLENBQW9CLGdCQUFlRyxFQUFHLFlBQXRDLENBQU4sQ0FBd0QsQ0FBbkUsZ0NBRFMsdUJBR1RLLElBQUksQ0FBQ0wsRUFBTCxDQUFVSyxJQUFJLENBQUNDLEdBQUwsQ0FBU0MsUUFBVCxFQUFWLENBSFMsdUJBS1QsTUFBT0YsQ0FBQUEsSUFBSSxDQUFDQyxHQUFaLENBTFMsd0JBT1RELElBQUksQ0FBQ0csUUFBTCxDQUFjQyxPQUFkLENBQXNCQyxPQUFPLEVBQUksZ0RBQzdCQSxPQUFPLENBQUdBLE9BQU8sQ0FBQ0gsUUFBUixFQUFWLENBQ0gsQ0FGRCxFQVBTLHdCQVdURixJQUFJLENBQUNNLFNBQUwsQ0FBaUIsR0FBSUMsQ0FBQUEsSUFBSixFQUFqQixDQVhTLHdCQWFSLE1BQU9QLENBQUFBLElBQVAsQ0FFSixDQWpCRSxFQWtCRkQsSUFsQkUsQ0FrQkcsQ0FBQyxDQUFDUyxJQUFELENBQU9DLE9BQVAsQ0FBZ0JDLFFBQWhCLENBQTBCUCxRQUExQixDQUFELEdBQXlDLGdEQUUzQyxNQUFPLENBQUNLLElBQUQsQ0FBT0MsT0FBUCxDQUFnQkMsUUFBaEIsQ0FBMEJQLFFBQTFCLENBQVAsQ0FDSCxDQXJCRSxDQUFQLENBc0JILENBekJEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge3ZhbGlkYXRlfSA9IHJlcXVpcmUoJ2thcm1hcmstdXRpbHMnKVxyXG5jb25zdCB7bW9kZWxzOiB7VXNlcn19ID0gcmVxdWlyZSgna2FybWFyay1kYXRhJylcclxuY29uc3Qge05vdEZvdW5kRXJyb3J9ID0gcmVxdWlyZSgna2FybWFyay1lcnJvcnMnKVxyXG5cclxuLyoqIFJldHJpZXZlIGFsbCB0aGUgdXNlciBkYXRhXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBpZCBvZiB0aGUgdXNlclxyXG4gKi9cclxubW9kdWxlLmV4cG9ydHMgPSAoaWQpID0+e1xyXG4gICAgdmFsaWRhdGUuc3RyaW5nKGlkLCAnaWQnKVxyXG5cclxuICAgIHJldHVybiBVc2VyLmZpbmRCeUlkKGlkKVxyXG4gICAgICAgIC5sZWFuKClcclxuICAgICAgICAudGhlbih1c2VyID0+e1xyXG4gICAgICAgICAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBOb3RGb3VuZEVycm9yIChgdXNlciB3aXRoIGlkICR7aWR9IG5vdCBmb3VuZGApXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB1c2VyLmlkID0gdXNlci5faWQudG9TdHJpbmcoKVxyXG5cclxuICAgICAgICAgICAgZGVsZXRlIHVzZXIuX2lkXHJcblxyXG4gICAgICAgICAgICB1c2VyLnByb2dyYW1zLmZvckVhY2gocHJvZ3JhbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwcm9ncmFtID0gcHJvZ3JhbS50b1N0cmluZygpXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB1c2VyLnJldHJpZXZlZCA9IG5ldyBEYXRlXHJcblxyXG4gICAgICAgICAgICAgcmV0dXJuIHVzZXJcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKHtuYW1lLCBzdXJuYW1lLCB1c2VybmFtZSwgcHJvZ3JhbXN9KSA9PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge25hbWUsIHN1cm5hbWUsIHVzZXJuYW1lLCBwcm9ncmFtc31cclxuICAgICAgICB9KVxyXG59Il19