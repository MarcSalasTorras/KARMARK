function cov_1h43ha9w5z(){var path="C:\\Users\\Marc Salas\\bootcamp2\\skylab-bootcamp-202001\\staff\\marc-salas\\karmark\\karmark-api\\logic\\delete-user-program.spec.js";var hash="5bf0ea84e98eb24b144f581e36616717aadcdeb2";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Marc Salas\\bootcamp2\\skylab-bootcamp-202001\\staff\\marc-salas\\karmark\\karmark-api\\logic\\delete-user-program.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:17},end:{line:3,column:32}},"2":{start:{line:4,column:17},end:{line:4,column:21}},"3":{start:{line:5,column:43},end:{line:5,column:66}},"4":{start:{line:6,column:28},end:{line:6,column:41}},"5":{start:{line:7,column:15},end:{line:7,column:34}},"6":{start:{line:9,column:34},end:{line:9,column:41}},"7":{start:{line:11,column:0},end:{line:68,column:2}},"8":{start:{line:14,column:4},end:{line:18,column:6}},"9":{start:{line:15,column:8},end:{line:17,column:41}},"10":{start:{line:16,column:20},end:{line:16,column:37}},"11":{start:{line:17,column:20},end:{line:17,column:40}},"12":{start:{line:19,column:4},end:{line:35,column:6}},"13":{start:{line:20,column:8},end:{line:20,column:33}},"14":{start:{line:21,column:8},end:{line:21,column:39}},"15":{start:{line:22,column:8},end:{line:22,column:41}},"16":{start:{line:23,column:8},end:{line:23,column:41}},"17":{start:{line:24,column:8},end:{line:24,column:47}},"18":{start:{line:25,column:8},end:{line:25,column:43}},"19":{start:{line:27,column:8},end:{line:34,column:11}},"20":{start:{line:28,column:28},end:{line:28,column:97}},"21":{start:{line:29,column:24},end:{line:29,column:40}},"22":{start:{line:30,column:26},end:{line:30,column:102}},"23":{start:{line:32,column:12},end:{line:32,column:35}},"24":{start:{line:36,column:4},end:{line:39,column:6}},"25":{start:{line:37,column:23},end:{line:37,column:59}},"26":{start:{line:38,column:8},end:{line:38,column:38}},"27":{start:{line:40,column:4},end:{line:52,column:6}},"28":{start:{line:41,column:8},end:{line:41,column:18}},"29":{start:{line:42,column:8},end:{line:42,column:116}},"30":{start:{line:42,column:27},end:{line:42,column:57}},"31":{start:{line:44,column:8},end:{line:44,column:21}},"32":{start:{line:45,column:8},end:{line:45,column:116}},"33":{start:{line:45,column:27},end:{line:45,column:57}},"34":{start:{line:47,column:8},end:{line:47,column:19}},"35":{start:{line:48,column:8},end:{line:48,column:116}},"36":{start:{line:48,column:27},end:{line:48,column:57}},"37":{start:{line:50,column:8},end:{line:50,column:19}},"38":{start:{line:51,column:8},end:{line:51,column:116}},"39":{start:{line:51,column:27},end:{line:51,column:57}},"40":{start:{line:53,column:4},end:{line:65,column:6}},"41":{start:{line:54,column:8},end:{line:54,column:15}},"42":{start:{line:55,column:8},end:{line:55,column:109}},"43":{start:{line:55,column:27},end:{line:55,column:57}},"44":{start:{line:57,column:8},end:{line:57,column:18}},"45":{start:{line:58,column:8},end:{line:58,column:109}},"46":{start:{line:58,column:27},end:{line:58,column:57}},"47":{start:{line:60,column:8},end:{line:60,column:16}},"48":{start:{line:61,column:8},end:{line:61,column:109}},"49":{start:{line:61,column:27},end:{line:61,column:57}},"50":{start:{line:63,column:8},end:{line:63,column:16}},"51":{start:{line:64,column:8},end:{line:64,column:109}},"52":{start:{line:64,column:27},end:{line:64,column:57}},"53":{start:{line:66,column:4},end:{line:66,column:105}},"54":{start:{line:66,column:16},end:{line:66,column:104}},"55":{start:{line:66,column:82},end:{line:66,column:103}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:30},end:{line:11,column:31}},loc:{start:{line:11,column:35},end:{line:68,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:11},end:{line:14,column:12}},loc:{start:{line:14,column:17},end:{line:18,column:5}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:16,column:14},end:{line:16,column:15}},loc:{start:{line:16,column:20},end:{line:16,column:37}},line:16},"3":{name:"(anonymous_3)",decl:{start:{line:17,column:14},end:{line:17,column:15}},loc:{start:{line:17,column:20},end:{line:17,column:40}},line:17},"4":{name:"(anonymous_4)",decl:{start:{line:19,column:15},end:{line:19,column:16}},loc:{start:{line:19,column:20},end:{line:35,column:5}},line:19},"5":{name:"(anonymous_5)",decl:{start:{line:28,column:14},end:{line:28,column:15}},loc:{start:{line:28,column:28},end:{line:28,column:97}},line:28},"6":{name:"(anonymous_6)",decl:{start:{line:29,column:14},end:{line:29,column:15}},loc:{start:{line:29,column:24},end:{line:29,column:40}},line:29},"7":{name:"(anonymous_7)",decl:{start:{line:30,column:14},end:{line:30,column:15}},loc:{start:{line:30,column:26},end:{line:30,column:102}},line:30},"8":{name:"(anonymous_8)",decl:{start:{line:31,column:14},end:{line:31,column:15}},loc:{start:{line:31,column:26},end:{line:34,column:9}},line:31},"9":{name:"(anonymous_9)",decl:{start:{line:36,column:45},end:{line:36,column:46}},loc:{start:{line:36,column:56},end:{line:39,column:5}},line:36},"10":{name:"(anonymous_10)",decl:{start:{line:40,column:43},end:{line:40,column:44}},loc:{start:{line:40,column:54},end:{line:52,column:5}},line:40},"11":{name:"(anonymous_11)",decl:{start:{line:42,column:21},end:{line:42,column:22}},loc:{start:{line:42,column:27},end:{line:42,column:57}},line:42},"12":{name:"(anonymous_12)",decl:{start:{line:45,column:21},end:{line:45,column:22}},loc:{start:{line:45,column:27},end:{line:45,column:57}},line:45},"13":{name:"(anonymous_13)",decl:{start:{line:48,column:21},end:{line:48,column:22}},loc:{start:{line:48,column:27},end:{line:48,column:57}},line:48},"14":{name:"(anonymous_14)",decl:{start:{line:51,column:21},end:{line:51,column:22}},loc:{start:{line:51,column:27},end:{line:51,column:57}},line:51},"15":{name:"(anonymous_15)",decl:{start:{line:53,column:39},end:{line:53,column:40}},loc:{start:{line:53,column:50},end:{line:65,column:5}},line:53},"16":{name:"(anonymous_16)",decl:{start:{line:55,column:21},end:{line:55,column:22}},loc:{start:{line:55,column:27},end:{line:55,column:57}},line:55},"17":{name:"(anonymous_17)",decl:{start:{line:58,column:21},end:{line:58,column:22}},loc:{start:{line:58,column:27},end:{line:58,column:57}},line:58},"18":{name:"(anonymous_18)",decl:{start:{line:61,column:21},end:{line:61,column:22}},loc:{start:{line:61,column:27},end:{line:61,column:57}},line:61},"19":{name:"(anonymous_19)",decl:{start:{line:64,column:21},end:{line:64,column:22}},loc:{start:{line:64,column:27},end:{line:64,column:57}},line:64},"20":{name:"(anonymous_20)",decl:{start:{line:66,column:10},end:{line:66,column:11}},loc:{start:{line:66,column:16},end:{line:66,column:104}},line:66},"21":{name:"(anonymous_21)",decl:{start:{line:66,column:76},end:{line:66,column:77}},loc:{start:{line:66,column:82},end:{line:66,column:103}},line:66}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5bf0ea84e98eb24b144f581e36616717aadcdeb2"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1h43ha9w5z=function(){return actualCoverage;};return actualCoverage;}cov_1h43ha9w5z();cov_1h43ha9w5z().s[0]++;require('dotenv').config();const{expect}=(cov_1h43ha9w5z().s[1]++,require('chai'));const{random}=(cov_1h43ha9w5z().s[2]++,Math);const{mongoose,models:{User,Program}}=(cov_1h43ha9w5z().s[3]++,require('karmark-data'));const{deleteUserProgram}=(cov_1h43ha9w5z().s[4]++,require('./'));const bcrypt=(cov_1h43ha9w5z().s[5]++,require('bcryptjs'));const{env:{TEST_MONGODB_URL}}=(cov_1h43ha9w5z().s[6]++,process);cov_1h43ha9w5z().s[7]++;describe('deleteUserProgram',()=>{cov_1h43ha9w5z().f[0]++;let name,surname,username,programName,code,_id,userId;cov_1h43ha9w5z().s[8]++;before(()=>{cov_1h43ha9w5z().f[1]++;cov_1h43ha9w5z().s[9]++;mongoose.connect(TEST_MONGODB_URL,{useNewUrlParser:true,useUnifiedTopology:true}).then(()=>{cov_1h43ha9w5z().f[2]++;cov_1h43ha9w5z().s[10]++;return User.deleteMany();}).then(()=>{cov_1h43ha9w5z().f[3]++;cov_1h43ha9w5z().s[11]++;return Program.deleteMany();});});cov_1h43ha9w5z().s[12]++;beforeEach(()=>{cov_1h43ha9w5z().f[4]++;cov_1h43ha9w5z().s[13]++;name=`name-${random()}`;cov_1h43ha9w5z().s[14]++;surname=`surname-${random()}`;cov_1h43ha9w5z().s[15]++;username=`username-${random()}`;cov_1h43ha9w5z().s[16]++;password=`password-${random()}`;cov_1h43ha9w5z().s[17]++;programName=`programName-${random()}`;cov_1h43ha9w5z().s[18]++;code=["up","down","left","right"];cov_1h43ha9w5z().s[19]++;return bcrypt.hash(password,10).then(password=>{cov_1h43ha9w5z().f[5]++;cov_1h43ha9w5z().s[20]++;return User.create({name,surname,username,password,created:new Date()});}).then(user=>{cov_1h43ha9w5z().f[6]++;cov_1h43ha9w5z().s[21]++;return userId=user.id;}).then(userId=>{cov_1h43ha9w5z().f[7]++;cov_1h43ha9w5z().s[22]++;return Program.create({name:programName,created:new Date(),author:userId,code});}).then(program=>{cov_1h43ha9w5z().f[8]++;cov_1h43ha9w5z().s[23]++;return _id=program.id;});});cov_1h43ha9w5z().s[24]++;it('should succed on correct arguments',async()=>{cov_1h43ha9w5z().f[9]++;const result=(cov_1h43ha9w5z().s[25]++,await deleteUserProgram(userId,_id));cov_1h43ha9w5z().s[26]++;expect(result).to.be.undefined;});cov_1h43ha9w5z().s[27]++;it('shpuld fail on non string author',async()=>{cov_1h43ha9w5z().f[10]++;cov_1h43ha9w5z().s[28]++;userId=4;cov_1h43ha9w5z().s[29]++;await expect(()=>{cov_1h43ha9w5z().f[11]++;cov_1h43ha9w5z().s[30]++;return deleteUserProgram(userId,_id);}).to.throw(TypeError,`author ${userId} is not a string`);cov_1h43ha9w5z().s[31]++;userId=true;cov_1h43ha9w5z().s[32]++;await expect(()=>{cov_1h43ha9w5z().f[12]++;cov_1h43ha9w5z().s[33]++;return deleteUserProgram(userId,_id);}).to.throw(TypeError,`author ${userId} is not a string`);cov_1h43ha9w5z().s[34]++;userId=[];cov_1h43ha9w5z().s[35]++;await expect(()=>{cov_1h43ha9w5z().f[13]++;cov_1h43ha9w5z().s[36]++;return deleteUserProgram(userId,_id);}).to.throw(TypeError,`author ${userId} is not a string`);cov_1h43ha9w5z().s[37]++;userId={};cov_1h43ha9w5z().s[38]++;await expect(()=>{cov_1h43ha9w5z().f[14]++;cov_1h43ha9w5z().s[39]++;return deleteUserProgram(userId,_id);}).to.throw(TypeError,`author ${userId} is not a string`);});cov_1h43ha9w5z().s[40]++;it('shpuld fail on non string id',async()=>{cov_1h43ha9w5z().f[15]++;cov_1h43ha9w5z().s[41]++;_id=4;cov_1h43ha9w5z().s[42]++;await expect(()=>{cov_1h43ha9w5z().f[16]++;cov_1h43ha9w5z().s[43]++;return deleteUserProgram(userId,_id);}).to.throw(TypeError,`id ${_id} is not a string`);cov_1h43ha9w5z().s[44]++;_id=true;cov_1h43ha9w5z().s[45]++;await expect(()=>{cov_1h43ha9w5z().f[17]++;cov_1h43ha9w5z().s[46]++;return deleteUserProgram(userId,_id);}).to.throw(TypeError,`id ${_id} is not a string`);cov_1h43ha9w5z().s[47]++;_id=[];cov_1h43ha9w5z().s[48]++;await expect(()=>{cov_1h43ha9w5z().f[18]++;cov_1h43ha9w5z().s[49]++;return deleteUserProgram(userId,_id);}).to.throw(TypeError,`id ${_id} is not a string`);cov_1h43ha9w5z().s[50]++;_id={};cov_1h43ha9w5z().s[51]++;await expect(()=>{cov_1h43ha9w5z().f[19]++;cov_1h43ha9w5z().s[52]++;return deleteUserProgram(userId,_id);}).to.throw(TypeError,`id ${_id} is not a string`);});cov_1h43ha9w5z().s[53]++;after(()=>{cov_1h43ha9w5z().f[20]++;cov_1h43ha9w5z().s[54]++;return Promise.all([User.deleteMany(),Program.deleteMany()]).then(()=>{cov_1h43ha9w5z().f[21]++;cov_1h43ha9w5z().s[55]++;return mongoose.disconnect();});});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbGV0ZS11c2VyLXByb2dyYW0uc3BlYy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZXhwZWN0IiwicmFuZG9tIiwiTWF0aCIsIm1vbmdvb3NlIiwibW9kZWxzIiwiVXNlciIsIlByb2dyYW0iLCJkZWxldGVVc2VyUHJvZ3JhbSIsImJjcnlwdCIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJwcm9jZXNzIiwiZGVzY3JpYmUiLCJuYW1lIiwic3VybmFtZSIsInVzZXJuYW1lIiwicHJvZ3JhbU5hbWUiLCJjb2RlIiwiX2lkIiwidXNlcklkIiwiYmVmb3JlIiwiY29ubmVjdCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsInRoZW4iLCJkZWxldGVNYW55IiwiYmVmb3JlRWFjaCIsInBhc3N3b3JkIiwiaGFzaCIsImNyZWF0ZSIsImNyZWF0ZWQiLCJEYXRlIiwidXNlciIsImlkIiwiYXV0aG9yIiwicHJvZ3JhbSIsIml0IiwicmVzdWx0IiwidG8iLCJiZSIsInVuZGVmaW5lZCIsInRocm93IiwiVHlwZUVycm9yIiwiYWZ0ZXIiLCJQcm9taXNlIiwiYWxsIiwiZGlzY29ubmVjdCJdLCJtYXBwaW5ncyI6InNvUEFBQUEsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkMsTUFBbEIsR0FFQSxLQUFNLENBQUNDLE1BQUQsMkJBQVdGLE9BQU8sQ0FBQyxNQUFELENBQWxCLENBQU4sQ0FDQSxLQUFNLENBQUNHLE1BQUQsMkJBQVdDLElBQVgsQ0FBTixDQUNBLEtBQU0sQ0FBQ0MsUUFBRCxDQUFXQyxNQUFNLENBQUMsQ0FBQ0MsSUFBRCxDQUFPQyxPQUFQLENBQWxCLDJCQUFxQ1IsT0FBTyxDQUFDLGNBQUQsQ0FBNUMsQ0FBTixDQUNBLEtBQU0sQ0FBQ1MsaUJBQUQsMkJBQXNCVCxPQUFPLENBQUMsSUFBRCxDQUE3QixDQUFOLENBQ0EsS0FBTVUsQ0FBQUEsTUFBTSwwQkFBR1YsT0FBTyxDQUFDLFVBQUQsQ0FBVixDQUFaLENB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b3RlbnYnKS5jb25maWcoKVxyXG5cclxuY29uc3Qge2V4cGVjdH0gPSByZXF1aXJlKCdjaGFpJylcclxuY29uc3Qge3JhbmRvbX0gPSBNYXRoXHJcbmNvbnN0IHttb25nb29zZSwgbW9kZWxzOntVc2VyLCBQcm9ncmFtfX0gPSByZXF1aXJlKCdrYXJtYXJrLWRhdGEnKVxyXG5jb25zdCB7ZGVsZXRlVXNlclByb2dyYW19ID0gcmVxdWlyZSgnLi8nKVxyXG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHRqcycpXHJcblxyXG5jb25zdHsgZW52OiB7VEVTVF9NT05HT0RCX1VSTH19ID0gcHJvY2Vzc1xyXG5cclxuZGVzY3JpYmUoJ2RlbGV0ZVVzZXJQcm9ncmFtJywgKCkgPT57XHJcbiAgICBsZXQgbmFtZSwgc3VybmFtZSwgdXNlcm5hbWUsIHByb2dyYW1OYW1lLCBjb2RlLCBfaWQsIHVzZXJJZFxyXG5cclxuICAgIGJlZm9yZSgoKSA9PiB7XHJcbiAgICAgICAgbW9uZ29vc2UuY29ubmVjdChURVNUX01PTkdPREJfVVJMLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0pXHJcbiAgICAgICAgLnRoZW4oKCkgPT4gVXNlci5kZWxldGVNYW55KCkpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4gUHJvZ3JhbS5kZWxldGVNYW55KCkpXHJcbiAgICB9KVxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PntcclxuICAgICAgICBuYW1lID0gYG5hbWUtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgc3VybmFtZSA9IGBzdXJuYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHVzZXJuYW1lID0gYHVzZXJuYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHBhc3N3b3JkID0gYHBhc3N3b3JkLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHByb2dyYW1OYW1lID0gYHByb2dyYW1OYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGNvZGUgPSBbXCJ1cFwiLFwiZG93blwiLFwibGVmdFwiLFwicmlnaHRcIl1cclxuXHJcbiAgICAgICAgcmV0dXJuIGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMClcclxuICAgICAgICAudGhlbigocGFzc3dvcmQpID0+IFVzZXIuY3JlYXRlKHsgbmFtZSwgc3VybmFtZSwgdXNlcm5hbWUsIHBhc3N3b3JkLCBjcmVhdGVkOiBuZXcgRGF0ZSB9KSlcclxuICAgICAgICAudGhlbigodXNlcikgPT4gdXNlcklkID0gdXNlci5pZClcclxuICAgICAgICAudGhlbigodXNlcklkKSA9PiBQcm9ncmFtLmNyZWF0ZSh7bmFtZTogcHJvZ3JhbU5hbWUsIGNyZWF0ZWQ6IG5ldyBEYXRlLCBhdXRob3I6IHVzZXJJZCwgY29kZX0pKVxyXG4gICAgICAgIC50aGVuKChwcm9ncmFtKSA9PntcclxuICAgICAgICAgICAgcmV0dXJuIF9pZCA9IHByb2dyYW0uaWRcclxuXHJcbiAgICAgICAgfSApXHJcbiAgICB9KVxyXG4gICAgaXQoJ3Nob3VsZCBzdWNjZWQgb24gY29ycmVjdCBhcmd1bWVudHMnLCBhc3luYyAoKSA9PntcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkZWxldGVVc2VyUHJvZ3JhbSh1c2VySWQsIF9pZClcclxuICAgICAgICBleHBlY3QocmVzdWx0KS50by5iZS51bmRlZmluZWRcclxuICAgIH0pXHJcbiAgICBpdCgnc2hwdWxkIGZhaWwgb24gbm9uIHN0cmluZyBhdXRob3InLCBhc3luYygpID0+IHtcclxuICAgICAgICB1c2VySWQgPSA0XHJcbiAgICAgICAgYXdhaXQgZXhwZWN0KCgpID0+IGRlbGV0ZVVzZXJQcm9ncmFtKHVzZXJJZCwgX2lkKSkudG8udGhyb3coVHlwZUVycm9yLCAoYGF1dGhvciAke3VzZXJJZH0gaXMgbm90IGEgc3RyaW5nYCkpXHJcblxyXG4gICAgICAgIHVzZXJJZCA9IHRydWVcclxuICAgICAgICBhd2FpdCBleHBlY3QoKCkgPT4gZGVsZXRlVXNlclByb2dyYW0odXNlcklkLCBfaWQpKS50by50aHJvdyhUeXBlRXJyb3IsIChgYXV0aG9yICR7dXNlcklkfSBpcyBub3QgYSBzdHJpbmdgKSlcclxuXHJcbiAgICAgICAgdXNlcklkID0gW11cclxuICAgICAgICBhd2FpdCBleHBlY3QoKCkgPT4gZGVsZXRlVXNlclByb2dyYW0odXNlcklkLCBfaWQpKS50by50aHJvdyhUeXBlRXJyb3IsIChgYXV0aG9yICR7dXNlcklkfSBpcyBub3QgYSBzdHJpbmdgKSlcclxuXHJcbiAgICAgICAgdXNlcklkID0ge31cclxuICAgICAgICBhd2FpdCBleHBlY3QoKCkgPT4gZGVsZXRlVXNlclByb2dyYW0odXNlcklkLCBfaWQpKS50by50aHJvdyhUeXBlRXJyb3IsIChgYXV0aG9yICR7dXNlcklkfSBpcyBub3QgYSBzdHJpbmdgKSlcclxuICAgIH0pXHJcbiAgICBpdCgnc2hwdWxkIGZhaWwgb24gbm9uIHN0cmluZyBpZCcsIGFzeW5jKCkgPT4ge1xyXG4gICAgICAgIF9pZCA9IDRcclxuICAgICAgICBhd2FpdCBleHBlY3QoKCkgPT4gZGVsZXRlVXNlclByb2dyYW0odXNlcklkLCBfaWQpKS50by50aHJvdyhUeXBlRXJyb3IsIChgaWQgJHtfaWR9IGlzIG5vdCBhIHN0cmluZ2ApKVxyXG5cclxuICAgICAgICBfaWQgPSB0cnVlXHJcbiAgICAgICAgYXdhaXQgZXhwZWN0KCgpID0+IGRlbGV0ZVVzZXJQcm9ncmFtKHVzZXJJZCwgX2lkKSkudG8udGhyb3coVHlwZUVycm9yLCAoYGlkICR7X2lkfSBpcyBub3QgYSBzdHJpbmdgKSlcclxuXHJcbiAgICAgICAgX2lkID0gW11cclxuICAgICAgICBhd2FpdCBleHBlY3QoKCkgPT4gZGVsZXRlVXNlclByb2dyYW0odXNlcklkLCBfaWQpKS50by50aHJvdyhUeXBlRXJyb3IsIChgaWQgJHtfaWR9IGlzIG5vdCBhIHN0cmluZ2ApKVxyXG5cclxuICAgICAgICBfaWQgPSB7fVxyXG4gICAgICAgIGF3YWl0IGV4cGVjdCgoKSA9PiBkZWxldGVVc2VyUHJvZ3JhbSh1c2VySWQsIF9pZCkpLnRvLnRocm93KFR5cGVFcnJvciwgKGBpZCAke19pZH0gaXMgbm90IGEgc3RyaW5nYCkpXHJcbiAgICB9KVxyXG4gICAgYWZ0ZXIoKCkgPT4gUHJvbWlzZS5hbGwoW1VzZXIuZGVsZXRlTWFueSgpLCBQcm9ncmFtLmRlbGV0ZU1hbnkoKV0pLnRoZW4oKCkgPT4gbW9uZ29vc2UuZGlzY29ubmVjdCgpKSlcclxuXHJcbn0pIl19