function cov_1yojqci1o1(){var path="C:\\Users\\Marc Salas\\bootcamp2\\skylab-bootcamp-202001\\staff\\marc-salas\\karmark\\karmark-api\\logic\\retrieve-user.spec.js";var hash="e0b417201f56f1f93efe994e52e5012f0860a8b5";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Marc Salas\\bootcamp2\\skylab-bootcamp-202001\\staff\\marc-salas\\karmark\\karmark-api\\logic\\retrieve-user.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:19},end:{line:3,column:34}},"2":{start:{line:4,column:19},end:{line:4,column:23}},"3":{start:{line:5,column:39},end:{line:5,column:62}},"4":{start:{line:6,column:40},end:{line:6,column:65}},"5":{start:{line:7,column:25},end:{line:7,column:38}},"6":{start:{line:8,column:15},end:{line:8,column:34}},"7":{start:{line:10,column:38},end:{line:10,column:45}},"8":{start:{line:12,column:0},end:{line:66,column:2}},"9":{start:{line:15,column:4},end:{line:18,column:5}},"10":{start:{line:16,column:8},end:{line:17,column:40}},"11":{start:{line:17,column:24},end:{line:17,column:39}},"12":{start:{line:19,column:4},end:{line:28,column:6}},"13":{start:{line:20,column:8},end:{line:20,column:33}},"14":{start:{line:21,column:8},end:{line:21,column:39}},"15":{start:{line:22,column:8},end:{line:22,column:41}},"16":{start:{line:23,column:8},end:{line:23,column:41}},"17":{start:{line:25,column:8},end:{line:27,column:42}},"18":{start:{line:26,column:32},end:{line:26,column:101}},"19":{start:{line:27,column:28},end:{line:27,column:41}},"20":{start:{line:29,column:4},end:{line:36,column:6}},"21":{start:{line:30,column:25},end:{line:30,column:48}},"22":{start:{line:31,column:8},end:{line:31,column:33}},"23":{start:{line:32,column:8},end:{line:32,column:44}},"24":{start:{line:33,column:8},end:{line:33,column:50}},"25":{start:{line:34,column:8},end:{line:34,column:52}},"26":{start:{line:35,column:8},end:{line:35,column:54}},"27":{start:{line:37,column:4},end:{line:49,column:6}},"28":{start:{line:38,column:18},end:{line:38,column:19}},"29":{start:{line:39,column:8},end:{line:39,column:95}},"30":{start:{line:39,column:26},end:{line:39,column:43}},"31":{start:{line:41,column:8},end:{line:41,column:18}},"32":{start:{line:42,column:8},end:{line:42,column:95}},"33":{start:{line:42,column:26},end:{line:42,column:43}},"34":{start:{line:44,column:8},end:{line:44,column:16}},"35":{start:{line:45,column:8},end:{line:45,column:95}},"36":{start:{line:45,column:26},end:{line:45,column:43}},"37":{start:{line:47,column:8},end:{line:47,column:16}},"38":{start:{line:48,column:8},end:{line:48,column:95}},"39":{start:{line:48,column:26},end:{line:48,column:43}},"40":{start:{line:50,column:4},end:{line:53,column:6}},"41":{start:{line:51,column:18},end:{line:51,column:20}},"42":{start:{line:52,column:8},end:{line:52,column:85}},"43":{start:{line:52,column:27},end:{line:52,column:44}},"44":{start:{line:54,column:4},end:{line:63,column:6}},"45":{start:{line:55,column:18},end:{line:55,column:44}},"46":{start:{line:56,column:25},end:{line:62,column:14}},"47":{start:{line:57,column:24},end:{line:57,column:66}},"48":{start:{line:59,column:16},end:{line:59,column:38}},"49":{start:{line:60,column:16},end:{line:60,column:61}},"50":{start:{line:61,column:16},end:{line:61,column:97}},"51":{start:{line:64,column:4},end:{line:64,column:83}},"52":{start:{line:64,column:16},end:{line:64,column:82}},"53":{start:{line:64,column:60},end:{line:64,column:81}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:12,column:25},end:{line:12,column:26}},loc:{start:{line:12,column:31},end:{line:66,column:1}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:16,column:8},end:{line:17,column:40}},line:16},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:24},end:{line:17,column:39}},line:17},"3":{name:"(anonymous_3)",decl:{start:{line:19,column:15},end:{line:19,column:16}},loc:{start:{line:19,column:21},end:{line:28,column:5}},line:19},"4":{name:"(anonymous_4)",decl:{start:{line:26,column:18},end:{line:26,column:19}},loc:{start:{line:26,column:32},end:{line:26,column:101}},line:26},"5":{name:"(anonymous_5)",decl:{start:{line:27,column:18},end:{line:27,column:19}},loc:{start:{line:27,column:28},end:{line:27,column:41}},line:27},"6":{name:"(anonymous_6)",decl:{start:{line:29,column:49},end:{line:29,column:50}},loc:{start:{line:29,column:60},end:{line:36,column:5}},line:29},"7":{name:"(anonymous_7)",decl:{start:{line:37,column:38},end:{line:37,column:39}},loc:{start:{line:37,column:50},end:{line:49,column:5}},line:37},"8":{name:"(anonymous_8)",decl:{start:{line:39,column:21},end:{line:39,column:22}},loc:{start:{line:39,column:26},end:{line:39,column:43}},line:39},"9":{name:"(anonymous_9)",decl:{start:{line:42,column:21},end:{line:42,column:22}},loc:{start:{line:42,column:26},end:{line:42,column:43}},line:42},"10":{name:"(anonymous_10)",decl:{start:{line:45,column:21},end:{line:45,column:22}},loc:{start:{line:45,column:26},end:{line:45,column:43}},line:45},"11":{name:"(anonymous_11)",decl:{start:{line:48,column:21},end:{line:48,column:22}},loc:{start:{line:48,column:26},end:{line:48,column:43}},line:48},"12":{name:"(anonymous_12)",decl:{start:{line:50,column:34},end:{line:50,column:35}},loc:{start:{line:50,column:46},end:{line:53,column:5}},line:50},"13":{name:"(anonymous_13)",decl:{start:{line:52,column:21},end:{line:52,column:22}},loc:{start:{line:52,column:27},end:{line:52,column:44}},line:52},"14":{name:"(anonymous_14)",decl:{start:{line:54,column:38},end:{line:54,column:39}},loc:{start:{line:54,column:50},end:{line:63,column:5}},line:54},"15":{name:"(anonymous_15)",decl:{start:{line:57,column:18},end:{line:57,column:19}},loc:{start:{line:57,column:24},end:{line:57,column:66}},line:57},"16":{name:"(anonymous_16)",decl:{start:{line:58,column:19},end:{line:58,column:20}},loc:{start:{line:58,column:29},end:{line:62,column:13}},line:58},"17":{name:"(anonymous_17)",decl:{start:{line:64,column:10},end:{line:64,column:11}},loc:{start:{line:64,column:16},end:{line:64,column:82}},line:64},"18":{name:"(anonymous_18)",decl:{start:{line:64,column:54},end:{line:64,column:55}},loc:{start:{line:64,column:60},end:{line:64,column:81}},line:64}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e0b417201f56f1f93efe994e52e5012f0860a8b5"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1yojqci1o1=function(){return actualCoverage;};return actualCoverage;}cov_1yojqci1o1();cov_1yojqci1o1().s[0]++;require('dotenv').config();const{expect}=(cov_1yojqci1o1().s[1]++,require('chai'));const{random}=(cov_1yojqci1o1().s[2]++,Math);const{mongoose,models:{User}}=(cov_1yojqci1o1().s[3]++,require('karmark-data'));const{ContentError,NotFoundError}=(cov_1yojqci1o1().s[4]++,require('karmark-errors'));const{retrieveUser}=(cov_1yojqci1o1().s[5]++,require('./'));const bcrypt=(cov_1yojqci1o1().s[6]++,require('bcryptjs'));const{env:{TEST_MONGODB_URL}}=(cov_1yojqci1o1().s[7]++,process);cov_1yojqci1o1().s[8]++;describe('retrieveUser',()=>{cov_1yojqci1o1().f[0]++;let name,surname,username,password,_id;cov_1yojqci1o1().s[9]++;before(()=>{cov_1yojqci1o1().f[1]++;cov_1yojqci1o1().s[10]++;return mongoose.connect(TEST_MONGODB_URL,{useNewUrlParser:true,useUnifiedTopology:true}).then(()=>{cov_1yojqci1o1().f[2]++;cov_1yojqci1o1().s[11]++;return User.deleteMany;});});cov_1yojqci1o1().s[12]++;beforeEach(()=>{cov_1yojqci1o1().f[3]++;cov_1yojqci1o1().s[13]++;name=`name-${random()}`;cov_1yojqci1o1().s[14]++;surname=`surname-${random()}`;cov_1yojqci1o1().s[15]++;username=`username-${random()}`;cov_1yojqci1o1().s[16]++;password=`password-${random()}`;cov_1yojqci1o1().s[17]++;return bcrypt.hash(password,10).then(password=>{cov_1yojqci1o1().f[4]++;cov_1yojqci1o1().s[18]++;return User.create({name,surname,username,password,created:new Date()});}).then(user=>{cov_1yojqci1o1().f[5]++;cov_1yojqci1o1().s[19]++;return _id=user.id;});});cov_1yojqci1o1().s[20]++;it('should return userData with correct id',async()=>{cov_1yojqci1o1().f[6]++;const userData=(cov_1yojqci1o1().s[21]++,await retrieveUser(_id));cov_1yojqci1o1().s[22]++;expect(userData).to.exist;cov_1yojqci1o1().s[23]++;expect(userData.name).to.equal(name);cov_1yojqci1o1().s[24]++;expect(userData.surname).to.equal(surname);cov_1yojqci1o1().s[25]++;expect(userData.username).to.equal(username);cov_1yojqci1o1().s[26]++;expect(userData.programs).to.instanceOf(Array);});cov_1yojqci1o1().s[27]++;it('should fail on not sring id',async()=>{cov_1yojqci1o1().f[7]++;let _id=(cov_1yojqci1o1().s[28]++,5);cov_1yojqci1o1().s[29]++;await expect(()=>{cov_1yojqci1o1().f[8]++;cov_1yojqci1o1().s[30]++;return retrieveUser(_id);}).to.throw(TypeError,`id ${_id} is not a string`);cov_1yojqci1o1().s[31]++;_id=true;cov_1yojqci1o1().s[32]++;await expect(()=>{cov_1yojqci1o1().f[9]++;cov_1yojqci1o1().s[33]++;return retrieveUser(_id);}).to.throw(TypeError,`id ${_id} is not a string`);cov_1yojqci1o1().s[34]++;_id=[];cov_1yojqci1o1().s[35]++;await expect(()=>{cov_1yojqci1o1().f[10]++;cov_1yojqci1o1().s[36]++;return retrieveUser(_id);}).to.throw(TypeError,`id ${_id} is not a string`);cov_1yojqci1o1().s[37]++;_id={};cov_1yojqci1o1().s[38]++;await expect(()=>{cov_1yojqci1o1().f[11]++;cov_1yojqci1o1().s[39]++;return retrieveUser(_id);}).to.throw(TypeError,`id ${_id} is not a string`);});cov_1yojqci1o1().s[40]++;it('should fail on empty id',async()=>{cov_1yojqci1o1().f[12]++;let _id=(cov_1yojqci1o1().s[41]++,'');cov_1yojqci1o1().s[42]++;await expect(()=>{cov_1yojqci1o1().f[13]++;cov_1yojqci1o1().s[43]++;return retrieveUser(_id);}).to.throw(ContentError,'id is empty');});cov_1yojqci1o1().s[44]++;it('should fail on incorrect id',async()=>{cov_1yojqci1o1().f[14]++;let _id=(cov_1yojqci1o1().s[45]++,'5e676668ab8a3d09d423bb1b');const userData=(cov_1yojqci1o1().s[46]++,await retrieveUser(_id).then(()=>{cov_1yojqci1o1().f[15]++;cov_1yojqci1o1().s[47]++;return console.log('should not reach this point');}).catch(error=>{cov_1yojqci1o1().f[16]++;cov_1yojqci1o1().s[48]++;expect(error).to.exist;cov_1yojqci1o1().s[49]++;expect(error).to.be.instanceOf(NotFoundError);cov_1yojqci1o1().s[50]++;expect(error.message).to.equal('user with id 5e676668ab8a3d09d423bb1b not found');}));});cov_1yojqci1o1().s[51]++;after(()=>{cov_1yojqci1o1().f[17]++;cov_1yojqci1o1().s[52]++;return Promise.all([User.deleteMany()]).then(()=>{cov_1yojqci1o1().f[18]++;cov_1yojqci1o1().s[53]++;return mongoose.disconnect();});});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXVzZXIuc3BlYy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZXhwZWN0IiwicmFuZG9tIiwiTWF0aCIsIm1vbmdvb3NlIiwibW9kZWxzIiwiVXNlciIsIkNvbnRlbnRFcnJvciIsIk5vdEZvdW5kRXJyb3IiLCJyZXRyaWV2ZVVzZXIiLCJiY3J5cHQiLCJlbnYiLCJURVNUX01PTkdPREJfVVJMIiwicHJvY2VzcyIsImRlc2NyaWJlIiwibmFtZSIsInN1cm5hbWUiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiX2lkIiwiYmVmb3JlIiwiY29ubmVjdCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsInRoZW4iLCJkZWxldGVNYW55IiwiYmVmb3JlRWFjaCIsImhhc2giLCJjcmVhdGUiLCJjcmVhdGVkIiwiRGF0ZSIsInVzZXIiLCJpZCIsIml0IiwidXNlckRhdGEiLCJ0byIsImV4aXN0IiwiZXF1YWwiLCJwcm9ncmFtcyIsImluc3RhbmNlT2YiLCJBcnJheSIsInRocm93IiwiVHlwZUVycm9yIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyb3IiLCJiZSIsIm1lc3NhZ2UiLCJhZnRlciIsIlByb21pc2UiLCJhbGwiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoiMGhPQUFBQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUVBLEtBQU0sQ0FBRUMsTUFBRiwyQkFBYUYsT0FBTyxDQUFDLE1BQUQsQ0FBcEIsQ0FBTixDQUNBLEtBQU0sQ0FBRUcsTUFBRiwyQkFBYUMsSUFBYixDQUFOLENBQ0EsS0FBTSxDQUFFQyxRQUFGLENBQVlDLE1BQU0sQ0FBRSxDQUFFQyxJQUFGLENBQXBCLDJCQUFpQ1AsT0FBTyxDQUFDLGNBQUQsQ0FBeEMsQ0FBTixDQUNBLEtBQU0sQ0FBRVEsWUFBRixDQUFnQkMsYUFBaEIsMkJBQWtDVCxPQUFPLENBQUMsZ0JBQUQsQ0FBekMsQ0FBTixDQUNBLEtBQU0sQ0FB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QUFHLDJCQUFHLDBCQUFILENBQVAsQ0FDQSxLQUFNZSxDQUFBQSxRQUFRLDJCQUFHLEtBQU16QixDQUFBQSxZQUFZLENBQUNVLEdBQUQsQ0FBWixDQUNsQkssSUFEa0IsQ0FDYixJQUFNLHlEQUFBbUIsQ0FBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksNkJBQVosRUFBMEMsQ0FEbkMsRUFFbEJDLEtBRmtCLENBRVhDLEtBQUQsRUFBVSxtREFDYjdDLE1BQU0sQ0FBQzZDLEtBQUQsQ0FBTixDQUFjWCxFQUFkLENBQWlCQyxLQUFqQixDQURhLHlCQUVibkMsTUFBTSxDQUFDNkMsS0FBRCxDQUFOLENBQWNYLEVBQWQsQ0FBaUJZLEVBQWpCLENBQW9CUixVQUFwQixDQUErQi9CLGFBQS9CLEVBRmEseUJBR2JQLE1BQU0sQ0FBQzZDLEtBQUssQ0FBQ0UsT0FBUCxDQUFOLENBQXNCYixFQUF0QixDQUF5QkUsS0FBekIsQ0FBK0IsaURBQS9CLEVBQ0gsQ0FOa0IsQ0FBVCxDQUFkLENBT0gsQ0FUQyxDQUFGLENBMUMyQix5QkFvRDNCWSxLQUFLLENBQUMsSUFBTSx5REFBQUMsQ0FBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksQ0FBQzdDLElBQUksQ0FBQ21CLFVBQUwsRUFBRCxDQUFaLEVBQWlDRCxJQUFqQyxDQUFzQyxJQUFNLHlEQUFBcEIsQ0FBQUEsUUFBUSxDQUFDZ0QsVUFBVCxHQUFxQixDQUFqRSxFQUFrRSxDQUF6RSxDQUFMLENBRUgsQ0F0RE8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpXHJcblxyXG5jb25zdCB7IGV4cGVjdCB9ID0gcmVxdWlyZSgnY2hhaScpXHJcbmNvbnN0IHsgcmFuZG9tIH0gPSBNYXRoXHJcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczogeyBVc2VyIH0gfSA9IHJlcXVpcmUoJ2thcm1hcmstZGF0YScpXHJcbmNvbnN0IHsgQ29udGVudEVycm9yLCBOb3RGb3VuZEVycm9yIH0gPSByZXF1aXJlKCdrYXJtYXJrLWVycm9ycycpXHJcbmNvbnN0IHsgcmV0cmlldmVVc2VyIH0gPSByZXF1aXJlKCcuLycpXHJcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJylcclxuXHJcbmNvbnN0IHsgZW52OiB7IFRFU1RfTU9OR09EQl9VUkwgfSB9ID0gcHJvY2Vzc1xyXG5cclxuZGVzY3JpYmUoJ3JldHJpZXZlVXNlcicsICgpID0+IHtcclxuICAgIGxldCBuYW1lLCBzdXJuYW1lLCB1c2VybmFtZSwgcGFzc3dvcmQsIF9pZFxyXG5cclxuICAgIGJlZm9yZSgoKSA9PlxyXG4gICAgICAgIG1vbmdvb3NlLmNvbm5lY3QoVEVTVF9NT05HT0RCX1VSTCwgeyB1c2VOZXdVcmxQYXJzZXI6IHRydWUsIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiBVc2VyLmRlbGV0ZU1hbnkpXHJcbiAgICApXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICBuYW1lID0gYG5hbWUtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgc3VybmFtZSA9IGBzdXJuYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHVzZXJuYW1lID0gYHVzZXJuYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHBhc3N3b3JkID0gYHBhc3N3b3JkLSR7cmFuZG9tKCl9YFxyXG5cclxuICAgICAgICByZXR1cm4gYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKVxyXG4gICAgICAgICAgICAudGhlbigocGFzc3dvcmQpID0+IFVzZXIuY3JlYXRlKHsgbmFtZSwgc3VybmFtZSwgdXNlcm5hbWUsIHBhc3N3b3JkLCBjcmVhdGVkOiBuZXcgRGF0ZSB9KSlcclxuICAgICAgICAgICAgLnRoZW4oKHVzZXIpID0+IF9pZCA9IHVzZXIuaWQpXHJcbiAgICB9KVxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdXNlckRhdGEgd2l0aCBjb3JyZWN0IGlkJywgYXN5bmMgKCkgPT57XHJcbiAgICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCByZXRyaWV2ZVVzZXIoX2lkKVxyXG4gICAgICAgIGV4cGVjdCh1c2VyRGF0YSkudG8uZXhpc3RcclxuICAgICAgICBleHBlY3QodXNlckRhdGEubmFtZSkudG8uZXF1YWwobmFtZSlcclxuICAgICAgICBleHBlY3QodXNlckRhdGEuc3VybmFtZSkudG8uZXF1YWwoc3VybmFtZSlcclxuICAgICAgICBleHBlY3QodXNlckRhdGEudXNlcm5hbWUpLnRvLmVxdWFsKHVzZXJuYW1lKVxyXG4gICAgICAgIGV4cGVjdCh1c2VyRGF0YS5wcm9ncmFtcykudG8uaW5zdGFuY2VPZihBcnJheSlcclxuICAgIH0pXHJcbiAgICBpdCgnc2hvdWxkIGZhaWwgb24gbm90IHNyaW5nIGlkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGxldCBfaWQgPSA1XHJcbiAgICAgICAgYXdhaXQgZXhwZWN0KCgpPT4gcmV0cmlldmVVc2VyKF9pZCkpLnRvLnRocm93KFR5cGVFcnJvciwgKGBpZCAke19pZH0gaXMgbm90IGEgc3RyaW5nYCkpXHJcbiAgICAgICAgXHJcbiAgICAgICAgX2lkID0gdHJ1ZVxyXG4gICAgICAgIGF3YWl0IGV4cGVjdCgoKT0+IHJldHJpZXZlVXNlcihfaWQpKS50by50aHJvdyhUeXBlRXJyb3IsIChgaWQgJHtfaWR9IGlzIG5vdCBhIHN0cmluZ2ApKVxyXG4gICAgICAgIFxyXG4gICAgICAgIF9pZCA9IFtdXHJcbiAgICAgICAgYXdhaXQgZXhwZWN0KCgpPT4gcmV0cmlldmVVc2VyKF9pZCkpLnRvLnRocm93KFR5cGVFcnJvciwgKGBpZCAke19pZH0gaXMgbm90IGEgc3RyaW5nYCkpXHJcbiAgICAgICAgXHJcbiAgICAgICAgX2lkID0ge31cclxuICAgICAgICBhd2FpdCBleHBlY3QoKCk9PiByZXRyaWV2ZVVzZXIoX2lkKSkudG8udGhyb3coVHlwZUVycm9yLCAoYGlkICR7X2lkfSBpcyBub3QgYSBzdHJpbmdgKSlcclxuICAgIH0pXHJcbiAgICBpdCgnc2hvdWxkIGZhaWwgb24gZW1wdHkgaWQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgbGV0IF9pZCA9ICcnXHJcbiAgICAgICAgYXdhaXQgZXhwZWN0KCgpID0+IHJldHJpZXZlVXNlcihfaWQpKS50by50aHJvdyhDb250ZW50RXJyb3IsICgnaWQgaXMgZW1wdHknKSlcclxuICAgIH0pXHJcbiAgICBpdCgnc2hvdWxkIGZhaWwgb24gaW5jb3JyZWN0IGlkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGxldCBfaWQgPSAnNWU2NzY2NjhhYjhhM2QwOWQ0MjNiYjFiJ1xyXG4gICAgICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgcmV0cmlldmVVc2VyKF9pZClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gY29uc29sZS5sb2coJ3Nob3VsZCBub3QgcmVhY2ggdGhpcyBwb2ludCcpKVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PntcclxuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uZXhpc3RcclxuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uYmUuaW5zdGFuY2VPZihOb3RGb3VuZEVycm9yKVxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxdWFsKCd1c2VyIHdpdGggaWQgNWU2NzY2NjhhYjhhM2QwOWQ0MjNiYjFiIG5vdCBmb3VuZCcpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgYWZ0ZXIoKCkgPT4gUHJvbWlzZS5hbGwoW1VzZXIuZGVsZXRlTWFueSgpXSkudGhlbigoKSA9PiBtb25nb29zZS5kaXNjb25uZWN0KCkpKVxyXG5cclxufSkiXX0=